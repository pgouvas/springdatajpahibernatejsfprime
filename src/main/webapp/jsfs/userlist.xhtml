<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

    <body>
        <ui:composition template="/templates/template.xhtml">

            <ui:define name="title"> Επιλογή Χρηστών </ui:define>
            <ui:define name="content">

                <h:form id="listform">  
                    
                    <p:commandButton id="showDialogButton"  value="Δημιουργία νέου χρήστη"  actionListener="#{userListBean.resetNewUser}" oncomplete="newuserdlg.show()" /> 
                    
                    <p:dataTable id="userTable" var="user" value="#{userListBean.allItems}" paginator="true" rows="10"  
                                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
                                 rowsPerPageTemplate="5,10,15" selectionMode="single"  selection="#{userListBean.selectedItem}"   > 

                        <p:ajax event="rowSelect" listener="#{userListBean.onRowSelect}" update=":listform:display" oncomplete="userDialog.show()" /> 

                        <p:column headerText="Α/Α" sortBy="#{user.userId}" filterBy="#{user.userId}">  
                            <h:outputText value="#{user.userId}" />  
                        </p:column>  

                        <p:column headerText="Επίθετο" sortBy="#{user.epwnymo}" >  
                            <h:outputText value="#{user.epwnymo}" />  
                        </p:column>                         
                        
                        <p:column headerText="Όνομα" sortBy="#{user.onomaXrhsth}" >  
                            <h:outputText value="#{user.onomaXrhsth}" />  
                        </p:column>                         
                        
                        <p:column headerText="Αριθμός Μητρώου" sortBy="#{user.am}" >  
                            <h:outputText value="#{user.am}" />  
                        </p:column>                          
                        
                        <p:column headerText="Μονάδα" sortBy="#{user.mipCode}" >  
                            <h:outputText value="#{user.mipCode}" />  
                        </p:column>  

                    </p:dataTable>  

                    <p:dialog header="Πληροφορίες Χρήστη" widgetVar="userDialog" resizable="false"  modal="true" showEffect="explode" hideEffect="explode">  

                        <h:panelGrid id="display" columns="2" cellpadding="4">  

                            <h:outputText value="A/A:" />  
                            <h:outputText value="#{userListBean.selectedItem.userId}" style="font-weight:bold"/>  

                            <h:outputText value="Επίθετο:" />  
                            <h:outputText value="#{userListBean.selectedItem.epwnymo}" style="font-weight:bold"/>  
                            
                            <h:outputText value="Όνομα:" />  
                            <h:outputText value="#{userListBean.selectedItem.onomaXrhsth}" style="font-weight:bold"/>                              
                            
                            <h:outputText value="Αριθμός Μητρώου:" />  
                            <h:outputText value="#{userListBean.selectedItem.am}" style="font-weight:bold"/>                                                       
                            
                            <h:outputText value="Κωδικός Μονάδας:" />  
                            <h:outputText value="#{userListBean.selectedItem.mipCode}" style="font-weight:bold"/>  

                        </h:panelGrid>  
                    </p:dialog>    
                    
                 </h:form>
                
                 <h:form id="newuserform">
                     
                    <p:dialog header="Δημιουργία νέου Χρήστη" widgetVar="newuserdlg" resizable="false" modal="true" visible="#{not empty facesContext.maximumSeverity}" >  
                            
                        <p:ajax event="close" listener="#{userListBean.resetNewUser}"/> 
                        
                            <p:messages id="msgs"/>  
                             
                            <h:panelGrid id="newusergrid" columns="3" style="margin-bottom:10px"> 

                                <h:outputLabel for="bathmos" value="Βαθμός:" />  
                                <p:inputText id="bathmos" value="#{userListBean.newuser.bathmos}" />  
                                <p:message for="bathmos" /> 
                                
                                <h:outputLabel for="oplo" value="Όπλο:" />  
                                <p:inputText id="oplo" value="#{userListBean.newuser.tmhma}" />                          
                                <p:message for="oplo" /> 
                                
                                <h:outputLabel for="am" value="Αριθμός Μητρώου:" />  
                                <p:inputText id="am" value="#{userListBean.newuser.am}" />                             
                                <p:message for="am" /> 
                                
                                <h:outputLabel for="epitheto" value="Επίθετο:" />  
                                <p:inputText id="epitheto" value="#{userListBean.newuser.epwnymo}" />                            
                                <p:message for="epitheto" /> 
                                
                                <h:outputLabel for="onoma" value="Όνομα:" />  
                                <p:inputText id="onoma" value="#{userListBean.newuser.onomaXrhsth}" />                            
                                <p:message for="onoma" /> 
                                
                                <h:outputLabel for="thesi" value="Θέση:" />  
                                <p:inputText id="thesi" value="#{userListBean.newuser.thesi}" />                            
                                <p:message for="thesi" /> 
                                
                                <h:outputLabel for="tilefono" value="Τηλέφωνο:" />  
                                <p:inputText id="tilefono" value="#{userListBean.newuser.thlefwno}" />  
                                <p:message for="tilefono" /> 
                                
                                <h:outputLabel for="monada" value="Μονάδα:" />  
                                <p:inputText id="monada" value="#{userListBean.newuser.mipCode}" />                          
                                <p:message for="monada" /> 
                                
                                <h:outputLabel for="diatagi" value="Διαταγή Εγγραφής:" />  
                                <p:inputText id="diatagi" value="#{userListBean.newuser.dghEggrafhs}" />                             
                                <p:message for="diatagi" /> 
                                
                                <h:outputLabel for="rolos" value="Ρόλος:" />  
                                <p:inputText id="rolos" value="#{userListBean.newuser.bathmos}" />                            
                                <p:message for="rolos" /> 
                                
                                <h:outputLabel for="username" value="Όνομα Χρήστη:" />  
                                <p:inputText id="username" value="#{userListBean.newuser.userId}" />                            
                                <p:message for="username" /> 
                                
                                <h:outputLabel for="password" value="Κωδικός Χρήστη:" />  
                                <p:password id="password" value="#{userListBean.newuser.bathmos}" />                            
                                <p:message for="password" /> 
                                
                            </h:panelGrid>  

                            <p:commandButton value="Αποθήκευση" id="savenewuser" update="newusergrid :listform:userTable" actionListener="#{userListBean.addUser}"  />  

                    </p:dialog>                  
                                                                       
                </h:form>  
                
           
            </ui:define>

        </ui:composition>
    </body>
</html>